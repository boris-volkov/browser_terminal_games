<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Ѭ</title>
<link href="../style.css" rel="stylesheet"/>
</head>


<body>
			
<div class="image"> <a href="main.html"> <img class="screenshot" src="screenshot.png"></img> </a> </div><div class="bookmark">./stocks/readme.txt</div><pre class=notes>
under construction.
</pre>
<div class="bookmark">./stocks/stocks.py</div><pre class=py>
<kw>import</kw> random, colors, sys

<kw>class</kw> stock_ticker<sc>(</sc><sc>)</sc>:
    <kw>def</kw> __init__<sc>(</sc>self, initial_price, investment<sc>)</sc>:
        self.price = initial_price
        self.account = investment
        self.num_shares = 0
        self.days = 0
        self.total_days = 0
        self.month_average = 0
        self.month = <sc>[</sc><sc>]</sc>
        self.price_history = <sc>[</sc>float<sc>(</sc><sgl_quote>'inf'</sgl_quote><sc>)</sc><sc>]</sc>

    <kw>def</kw> month_avg<sc>(</sc>self<sc>)</sc>:
        self.month.append<sc>(</sc>self.num_shares*self.price<sc>)</sc>
        <kw>try</kw>:
            self.month_average = sum<sc>(</sc>self.month<sc>)</sc>/len<sc>(</sc>self.month<sc>)</sc>
        <kw>except</kw> DivisionByZeroError:
            self.month_average = 0

    <kw>def</kw> die<sc>(</sc>self<sc>)</sc>:
        <kw>if</kw> self.account &gt 0:
            <kw>return</kw>
        print<sc>(</sc>colors.clear_screen<sc>)</sc>
        print<sc>(</sc>colors.red, <sgl_quote>'you ran out of money.\n you died ☠'</sgl_quote><sc>)</sc>
        input<sc>(</sc><sc>)</sc>
        sys.exit<sc>(</sc>0<sc>)</sc>

    <kw>def</kw> pay_rent<sc>(</sc>self<sc>)</sc>:
        print<sc>(</sc><sgl_quote>'   Pay rent:'</sgl_quote>, colors.red, <sgl_quote>'$500'</sgl_quote>, colors.reset<sc>)</sc>
        print<sc>(</sc><sgl_quote>'3% dividend:'</sgl_quote>, colors.green,  <sgl_quote>'$<sc>{</sc>0:.2f<sc>}</sc>'</sgl_quote>.format<sc>(</sc>self.month_average/33.3<sc>)</sc>, colors.reset<sc>)</sc>
        input<sc>(</sc><sc>)</sc>
        print<sc>(</sc>colors.clear_screen<sc>)</sc>
        self.account += self.month_average/33.3
        self.account -= 500
        self.month = <sc>[</sc><sc>]</sc>

    <kw>def</kw> ideal_play<sc>(</sc>self<sc>)</sc>:
        self.price_history.append<sc>(</sc>-float<sc>(</sc><sgl_quote>'inf'</sgl_quote><sc>)</sc><sc>)</sc>
        month = <sc>[</sc><sc>]</sc>
        bank = 10000
        shares = 0
        <kw>for</kw> i <kw>in</kw> range<sc>(</sc>1, len<sc>(</sc>self.price_history<sc>)</sc>-1<sc>)</sc>:
            price = self.price_history<sc>[</sc>i<sc>]</sc>
            month.append<sc>(</sc>shares*price<sc>)</sc>
            <kw>if</kw> price &lt self.price_history<sc>[</sc>i+1<sc>]</sc>:
                <kw>if</kw> price &lt self.price_history<sc>[</sc>i-1<sc>]</sc>:
                    shares_to_buy = bank//price
                    bank -= shares_to_buy*price
                    shares = shares_to_buy
            <kw>if</kw> price &gt self.price_history<sc>[</sc>i+1<sc>]</sc>:
                <kw>if</kw> price &gt self.price_history<sc>[</sc>i-1<sc>]</sc>:
                    bank += shares * price
                    shares = 0
            <kw>if</kw> i%30 == 0:
                bank -= 500
                bank += sum<sc>(</sc>month<sc>)</sc>/30*0.03
                month = <sc>[</sc><sc>]</sc>
        <kw>return</kw> bank + shares*self.price_history<sc>[</sc>-2<sc>]</sc>

    <kw>def</kw> start<sc>(</sc>self<sc>)</sc>:
        <kw>while</kw> 1:
            self.die<sc>(</sc><sc>)</sc>
            self.month_avg<sc>(</sc><sc>)</sc>
            print<sc>(</sc>colors.clear_screen<sc>)</sc>
            <comment Class="py">#print<sc>(</sc>self.month_average<sc>)</sc>
</comment>            self.days = <sc>(</sc>self.days + 1<sc>)</sc>%30
            self.total_days += 1
            <kw>if</kw> self.total_days == 364:
                print<sc>(</sc><dbl_quote>"final day!"</dbl_quote><sc>)</sc>
            <kw>if</kw> self.total_days == 365:
                print<sc>(</sc><sgl_quote>'the year <kw>is</kw> up'</sgl_quote><sc>)</sc>
                print<sc>(</sc><sgl_quote>'you ended up <kw>with</kw>'</sgl_quote><sc>)</sc>
                print<sc>(</sc>colors.cyan + <sgl_quote>'  '</sgl_quote>, <sgl_quote>'$<sc>{</sc>0:,.2f<sc>}</sc>'</sgl_quote>.format<sc>(</sc>self.account + self.num_shares*self.price<sc>)</sc>, colors.green<sc>)</sc>
                print<sc>(</sc><sgl_quote>'<kw>with</kw> perfect choices,\n it could have been:\n '</sgl_quote>+ colors.cyan, <sgl_quote>'$<sc>{</sc>0:,.2f<sc>}</sc>'</sgl_quote>.format<sc>(</sc>self.ideal_play<sc>(</sc><sc>)</sc><sc>)</sc><sc>)</sc>
                input<sc>(</sc>colors.reset<sc>)</sc>
                <kw>return</kw>
            <kw>if</kw> self.days == 0:
                self.pay_rent<sc>(</sc><sc>)</sc>
                self.die<sc>(</sc><sc>)</sc>
            print<sc>(</sc>colors.green + <sgl_quote>'Day:'</sgl_quote>, colors.cyan, self.total_days, <sgl_quote>'/ 365'</sgl_quote>, colors.reset<sc>)</sc>

            print<sc>(</sc><sgl_quote>'Rent due <kw>in</kw>'</sgl_quote>+colors.red, 30 - self.days, colors.reset + <sgl_quote>'days:'</sgl_quote>,colors.red +  <sgl_quote>'$500'</sgl_quote>, colors.yellow<sc>)</sc>
            print<sc>(</sc><sgl_quote>'3% dividend paid monthly'</sgl_quote><sc>)</sc>
            print<sc>(</sc><sgl_quote>'   on average holding.'</sgl_quote><sc>)</sc>
            print<sc>(</sc><sgl_quote>'-'</sgl_quote>*26, colors.reset<sc>)</sc>
            change = random.gauss<sc>(</sc>0,4<sc>)</sc>

            <kw>if</kw> change &gt 0:
                color = colors.green
            <kw>else</kw>:
                color = colors.red
            self.price += change
            self.price_history.append<sc>(</sc>self.price<sc>)</sc>
            <kw>if</kw> self.price &lt 0:
                print<sc>(</sc>colors.red, <sgl_quote>'This company went out of business, sorry ☠'</sgl_quote><sc>)</sc>
                self.account += self.num_shares*self.price
                print<sc>(</sc><sgl_quote>'You ended up <kw>with</kw>'</sgl_quote><sc>)</sc>

                print<sc>(</sc><sgl_quote>'<sc>{</sc>0:.2f<sc>}</sc>'</sgl_quote>.format<sc>(</sc>self.account<sc>)</sc><sc>)</sc>
                input<sc>(</sc><sgl_quote>''</sgl_quote><sc>)</sc>
                <kw>return</kw>
            print<sc>(</sc><sgl_quote>'Your cash balance:'</sgl_quote>, colors.cyan<sc>)</sc>
            print<sc>(</sc><sc>)</sc>
            print<sc>(</sc><sgl_quote>'      '</sgl_quote>, <sgl_quote>'$<sc>{</sc>0:,.2f<sc>}</sc>'</sgl_quote>.format<sc>(</sc>self.account<sc>)</sc><sc>)</sc>
            print<sc>(</sc>colors.reset<sc>)</sc>
            print<sc>(</sc><sgl_quote>'Current price per share:'</sgl_quote>, color<sc>)</sc>
            print<sc>(</sc><sc>)</sc>
            print<sc>(</sc><sgl_quote>'      '</sgl_quote>, <sgl_quote>'$<sc>{</sc>0:.2f<sc>}</sc>'</sgl_quote>.format<sc>(</sc>self.price<sc>)</sc><sc>)</sc>
            print<sc>(</sc>colors.reset<sc>)</sc>
            print<sc>(</sc><sgl_quote>'You own'</sgl_quote>, colors.yellow, self.num_shares, \
                    colors.reset, <sgl_quote>'shares, worth:'</sgl_quote>, colors.yellow<sc>)</sc>
            print<sc>(</sc><sc>)</sc>
            print<sc>(</sc><sgl_quote>'      '</sgl_quote>, <sgl_quote>'$<sc>{</sc>0:,.2f<sc>}</sc>'</sgl_quote>.format<sc>(</sc>self.price*self.num_shares<sc>)</sc><sc>)</sc>
            print<sc>(</sc>colors.green<sc>)</sc>
            choice = input<sc>(</sc><sgl_quote>'Buy/Sell/Skip? <sc>(</sc>b/s/enter<sc>)</sc>:'</sgl_quote><sc>)</sc>
            <kw>if</kw> <sgl_quote>'b'</sgl_quote> <kw>in</kw> choice:
                <kw>try</kw>:
                    number = int<sc>(</sc>input<sc>(</sc><dbl_quote>"how many shares? "</dbl_quote><sc>)</sc><sc>)</sc>
                <kw>except</kw>:
                    <kw>continue</kw>
                self.account -= number*self.price
                self.num_shares += number
            <kw>if</kw> <sgl_quote>'s'</sgl_quote> <kw>in</kw> choice:
                <kw>try</kw>:
                    number = int<sc>(</sc>input<sc>(</sc><dbl_quote>"how many shares? "</dbl_quote><sc>)</sc><sc>)</sc>
                <kw>except</kw>:
                    <kw>continue</kw>
                <kw>if</kw> number &gt self.num_shares:
                    self.account += self.num_shares*self.price
                    self.num_shares = 0
                <kw>else</kw>:
                    self.account += number*self.price
                    self.num_shares -= number
            

s = stock_ticker<sc>(</sc>100, 10000<sc>)</sc>
s.start<sc>(</sc><sc>)</sc>

</pre>

</body>
</html>
